{% extends '_layouts/admin/main.html.twig' %}

{% block page %}Quản Lý Danh Mục{% endblock %}

{% block content %}

    <div class="row">
        <div class="col-xl-12">
            <div>
                <div class="col-xl-3 mb-3">
                    <a href="{{ path('admin_category_create') }}"
                       class="btn btn-lg btn-primary btn-block waves-effect waves-light ">
                        <i class="fa fa-plus mr-1"></i> Thêm Danh Mục
                    </a>
                </div>
                <table id="category-datatable-buttons"
                       class="table table-striped table-bordered dt-responsive nowrap"
                       style="border-collapse: collapse; border-spacing: 0; width: 100%;">
                    <thead>
                    <tr>
                        <th>Mã Danh mục</th>
                        <th>Tên danh mục</th>
                        <th>Thư Mục Cha</th>
                        <th>Trạng Thái</th>
                        <th>Ảnh</th>
                        <th>Mô tả</th>
                        <th></th>
                    </tr>
                    </thead>
                    <tbody></tbody>

                </table>

            </div>
        </div>
        <!-- end col -->
    </div>


{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script type="module">
        $(document).ready(function () {
            $("#category-datatable-buttons").DataTable().destroy();

            $("#category-datatable-buttons").DataTable({
                lengthChange: false,
                buttons: ["copy", "excel", "pdf"],
                order: [[0, 'desc']],
                ajax: '{{ url('admin_category_list') }}',
                columns: [
                    {data: 'slug'},
                    {data: 'name'},
                    {
                        data: 'parent',
                        render: function (data) {
                            if (data === '-') {
                                return 'Không có';
                            }
                            return data;
                        }
                    },
                    {
                        data: 'status', render: function (data) {
                            if (data === 1) {
                                return 'Kích Hoạt';
                            } else if (data === 0) return 'Không Kích Hoạt';
                            else return 'Draft';
                        }
                    },
                    {
                        data: 'image', render: function (data) {
                            if (data === null) {
                                return 'Không có';
                            } else return data;
                        }
                    },
                    {
                        data: 'description', render: function (data) {
                            if (data === null) {
                                return 'Không có';
                            } else return data;
                        }
                    },
                    {
                        data: 'actions',
                    }
                ],
            });
            a.buttons().container().appendTo("#category-datatable-buttons_wrapper .col-md-6:eq(0)");
        });
    </script>

{% endblock %}
