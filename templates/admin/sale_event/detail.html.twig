{% extends '_layouts/admin/main.html.twig' %}

{% block page %}{{ page_title }}{% endblock %}

{% block content %}

    <div class="row">
        <div class="col-lg-6">
            <div>
                <h5 class="font-14">Chi tiết sự kiện sale</h5>
                <p class="sub-header">
                    Đây là trang chi tiết cài đặt. Vui lòng xem thông tin chi tiết của cài đặt bên dưới.
                    (<span style="color: red">*</span>) là trường bắt buộc.
                </p>

                <table class="table table-striped table-bordered" style="border-collapse: collapse; border-spacing: 0; width: 100%;">
                    <tbody>
                    <tr>
                        <td>Tên sự kiện Sale<span style="color: red">*</span>:</td>
                        <td>{{ sale_event.name }}</td>
                    </tr>
                    <tr>
                        <td>Lượng giảm giá<span style="color: red">*</span>:</td>
                        <td>{{ sale_event.discount_amount }}</td>
                    </tr>
                    <tr>
                        <td>Kiểu giảm giá<span style="color: red">*</span>:</td>
                        <td>{{ sale_event.discount_type }}</td>
                    </tr>
                    <tr>
                        <td>Bắt đầu vào<span style="color: red">*</span>:</td>
                        <td>{{ sale_event.start_at }}</td>
                    </tr>
                    <tr>
                        <td>Kết Thúc Vào<span style="color: red">*</span>:</td>
                        <td>{{ sale_event.end_at }}</td>
                    </tr>
                    <tr>
                        <td>Tạo Vào<span style="color: red">*</span>:</td>
                        <td>{{ sale_event.created_at }}</td>
                    </tr>
                    <tr>
                        <td>Cập Nhật Vào<span style="color: red">*</span>:</td>
                        <td>{{ sale_event.updated_at }}</td>
                    </tr>

                    </tbody>
                </table>

                <style>
                    table tbody tr td:first-child {
                        width: 30%;
                        font-weight: bold;
                    }
                </style>

                <div class="button-list d-flex justify-content-center">
                    <a href="{{ path('admin_sale-evnt_update', {'id': sale_event.id}) }}" class="btn btn-primary waves-effect waves-light">Chỉnh sửa</a>
                    <button class="btn btn-danger waves-effect waves-light" data-id="{{ sale_event.id }}">Xóa</button>
                    <a href="{{ path('admin_sale-event_index') }}" class="btn btn-secondary waves-effect waves-light">Quay lại</a>

                    <script>
                        $(document).ready(function() {
                            $('.btn-danger').click(function() {
                                let setting = $(this).data('id');

                                if (confirm('Bạn có chắc chắn muốn xóa cài đặt này không?')) {
                                    $.ajax({
                                        url: '{{ path('admin_sale-event_delete', {'id': sale_event.id}) }}',
                                        type: 'POST',
                                        data: {
                                            delete_id: setting
                                        },
                                        headers: {
                                            'X-Requested-With': 'XMLHttpRequest'
                                        },
                                        success: function () {
                                            alert('Xóa thành công!');
                                            location.reload();
                                        },
                                        error: function () {
                                            alert('Có lỗi xảy ra khi xóa!');
                                        }
                                    });
                                }
                            });
                        });
                    </script>
                </div>
            </div>
        </div>
    </div>

{% endblock %}